// Translations
const TRANSLATIONS = {
    en: {
        nav_home: "Home",
        nav_how: "How it Works",
        nav_insp: "Inspiration",
        nav_saved: "‚ù§Ô∏è Saved Ideas",
        hero_title: "Don't Toss It, Transform It",
        hero_desc: "Discover creative, sustainable ways to repurpose everyday items with the power of AI.",
        upload_title: "Upload your item",
        upload_desc: "Drag & drop an image here, or click to select",
        upload_btn: "Choose File",
        analyze_btn: "‚ú® Generate Ideas",
        results_title: "Upcycling Ideas for:",
        saved_title: "Your Saved Collection ‚ù§Ô∏è",
        saved_empty: "You haven't saved any ideas yet. Start analyzing items to build your collection!",
        saved_btn_find: "Find Ideas",
        how_title: "How It Works",
        how_desc: "Upcycle AI uses advanced image recognition to identify discarded items and suggests creative DIY projects. Our goal is to promote sustainability by extending the lifecycle of everyday objects.",
        step1_title: "1. Identify",
        step1_desc: "Upload a photo of any item you're about to throw away‚Äîbottles, boxes, old clothes, or furniture.",
        step2_title: "2. Brainstorm",
        step2_desc: "Our AI analyzes the material and shape to generate unique, practical, and aesthetic upcycling ideas.",
        step3_title: "3. Create",
        step3_desc: "Follow the simple guides, complete with tool lists and difficulty ratings, to build something new.",
        gallery_title: "Inspiration Gallery",
        gallery_desc: "See what's possible. Here are some popular projects generated by our community.",
        gal1_title: "Wine Bottle Lamp",
        gal1_desc: "Turn empty glass bottles into elegant table lamps using simple fairy lights or a lamp kit.",
        gal2_title: "Denim Tote Bag",
        gal2_desc: "Repurpose old jeans into a sturdy, stylish tote bag perfect for grocery shopping.",
        gal3_title: "Tin Can Planters",
        gal3_desc: "Clean tin cans, paint them with vibrant colors, and use them to grow kitchen herbs.",
        gal4_title: "Ladder Bookshelf",
        gal4_desc: "Mount an old wooden ladder horizontally on the wall for a rustic, space-saving bookshelf.",
        loading_text: "Scanning your item for potential...",
        footer_text: "&copy; 2026 Upcycle AI. Promoting sustainable living one project at a time.",
        tools_label: "You'll need:",
        save_btn: "Save",
        saved_btn: "Saved",
        share_btn: "Share",
        share_msg: "Check out this upcycling idea: ",
        share_success: "Link copied to clipboard!",
        // New How It Works & Tips
        how_step1_detail: "Look around for items you don't use anymore‚Äîempty jars, cardboard boxes, old t-shirts, or even broken furniture.",
        how_step2_detail: "Our AI technology identifies the object's material, shape, and condition to suggest the best repurposing projects.",
        how_step3_detail: "We provide a step-by-step guide, including a list of necessary tools and the estimated difficulty level, so you can start creating immediately.",
        tip_title: "Pro Tips for Best Results",
        tip_1_title: "Good Lighting",
        tip_1_desc: "Take photos in a well-lit area so the AI can clearly see the texture and details.",
        tip_2_title: "Clear Background",
        tip_2_desc: "Place the item against a plain background to help the AI isolate the object.",
        tip_3_title: "One Item at a Time",
        tip_3_desc: "For the most accurate ideas, scan one main item per photo.",
        faq_title: "Frequently Asked Questions",
        faq_q1: "Is this service free?",
        faq_a1: "Yes! Upcycle AI is completely free to use for generating upcycling ideas.",
        faq_q2: "Do I need to sign up?",
        faq_a2: "No, you can start generating ideas instantly without an account. We use browser storage to save your favorite ideas.",
        faq_q3: "What kind of items work best?",
        faq_a3: "Common household waste like glass bottles, tin cans, cardboard, denim, and plastic containers works best.",
        cta_title: "Ready to Start?",
        cta_btn: "Upload Item Now",
        // Inspiration Page
        insp_hero_title: "Community Creations",
        insp_hero_desc: "Explore a curated collection of upcycling projects from our global community.",
        filter_all: "All",
        filter_lighting: "Lighting",
        filter_fashion: "Fashion",
        filter_garden: "Garden",
        filter_decor: "Home Decor",
        featured_tag: "Featured Project",
        featured_title: "Vertical PET Bottle Garden",
        featured_desc: "A sustainable solution for urban gardening using recycled plastic bottles. Perfect for balconies and small kitchens.",
        cta_submit_title: "Made Something Cool?",
        cta_submit_desc: "Share your upcycling project with the community and inspire others!",
        cta_submit_btn: "Submit Project",
        // Static Content (Index)
        why_upcycle_title: "Why Upcycle?",
        why_upcycle_desc: "Upcycling is more than just a trend; it's a necessary shift towards a sustainable future. By repurposing items, we reduce landfill waste, conserve resources, and unleash our creativity. Every bottle, box, or piece of fabric has the potential to become something beautiful and functional.",
        feature_1_title: "Eco-Friendly",
        feature_1_desc: "Reduce your carbon footprint by giving old items a second life instead of buying new.",
        feature_2_title: "Cost-Effective",
        feature_2_desc: "Save money on home decor and organizers by using materials you already have.",
        feature_3_title: "Creative Outlet",
        feature_3_desc: "Express your unique style and improved your DIY skills with personalized projects.",
        popular_ideas_title: "Popular Upcycling Ideas",
        // Popular Cards
        pop_type_decor: "Decor",
        pop_type_storage: "Storage",
        pop_type_fashion: "Fashion",
        pop_diff_easy: "Easy",
        pop_diff_medium: "Medium",
        pop_card1_title: "Glass Jar Terrarium",
        pop_card1_desc: "Create a miniature ecosystem in an old pasta sauce jar. Perfect for succulents and moss.",
        pop_card1_tool1: "Clean Jar",
        pop_card1_tool2: "Soil",
        pop_card1_tool3: "Pebbles",
        pop_card2_title: "Cereal Box Organizer",
        pop_card2_desc: "Cut cereal boxes at an angle to create stylish magazine holders or paper organizers.",
        pop_card2_tool1: "Scissors",
        pop_card2_tool2: "Wrapping Paper",
        pop_card2_tool3: "Glue",
        pop_card3_title: "T-Shirt Yarn Rug",
        pop_card3_desc: "Turn old t-shirts into yarn and crochet or braid a colorful, durable rug for your home.",
        pop_card3_tool1: "Old Tees",
        pop_card3_tool2: "Scissors",
        pop_card3_tool3: "Crochet Hook (Opt)"
    },
    ko: {
        nav_home: "Ìôà",
        nav_how: "ÏÇ¨Ïö© Î∞©Î≤ï",
        nav_insp: "ÏòÅÍ∞ê ÏñªÍ∏∞",
        nav_saved: "‚ù§Ô∏è ÎÇ¥ Î≥¥Í¥ÄÌï®",
        hero_title: "Î≤ÑÎ¶¨ÏßÄ ÎßêÍ≥†, Î≥ÄÏã†ÏãúÌÇ§ÏÑ∏Ïöî",
        hero_desc: "AIÏùò ÌûòÏúºÎ°ú ÏùºÏÉÅ ÏÜç Î¨ºÍ±¥Îì§ÏùÑ Ï∞ΩÏùòÏ†ÅÏù¥Í≥† ÏßÄÏÜç Í∞ÄÎä•Ìïú Î∞©ÏãùÏúºÎ°ú Ïû¨ÏÇ¨Ïö©ÌïòÎäî Î∞©Î≤ïÏùÑ Î∞úÍ≤¨ÌïòÏÑ∏Ïöî.",
        upload_title: "Î¨ºÍ±¥ ÏÇ¨ÏßÑ ÏóÖÎ°úÎìú",
        upload_desc: "Ïù¥ÎØ∏ÏßÄÎ•º ÎìúÎûòÍ∑∏ÌïòÍ±∞ÎÇò ÌÅ¥Î¶≠ÌïòÏó¨ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî",
        upload_btn: "ÌååÏùº ÏÑ†ÌÉù",
        analyze_btn: "‚ú® ÏïÑÏù¥ÎîîÏñ¥ ÏÉùÏÑ±ÌïòÍ∏∞",
        results_title: "ÏóÖÏÇ¨Ïù¥ÌÅ¥ÎßÅ ÏïÑÏù¥ÎîîÏñ¥:",
        saved_title: "ÎÇòÏùò Î≥¥Í¥ÄÌï® ‚ù§Ô∏è",
        saved_empty: "ÏïÑÏßÅ Ï†ÄÏû•Îêú ÏïÑÏù¥ÎîîÏñ¥Í∞Ä ÏóÜÏäµÎãàÎã§. Î¨ºÍ±¥ÏùÑ Î∂ÑÏÑùÌïòÍ≥† ÏïÑÏù¥ÎîîÏñ¥Î•º Î™®ÏïÑÎ≥¥ÏÑ∏Ïöî!",
        saved_btn_find: "ÏïÑÏù¥ÎîîÏñ¥ Ï∞æÍ∏∞",
        how_title: "ÏÇ¨Ïö© Î∞©Î≤ï",
        how_desc: "Upcycle AIÎäî Í≥†Í∏â Ïù¥ÎØ∏ÏßÄ Ïù∏ÏãùÏùÑ ÏÇ¨Ïö©ÌïòÏó¨ Î≤ÑÎ†§ÏßÑ Î¨ºÍ±¥ÏùÑ ÏãùÎ≥ÑÌïòÍ≥† Ï∞ΩÏùòÏ†ÅÏù∏ DIY ÌîÑÎ°úÏ†ùÌä∏Î•º Ï†úÏïàÌï©ÎãàÎã§. Ïö∞Î¶¨Ïùò Î™©ÌëúÎäî ÏùºÏÉÅ Î¨ºÍ±¥Ïùò ÏàòÎ™ÖÏùÑ Ïó∞Ïû•ÌïòÏó¨ ÏßÄÏÜç Í∞ÄÎä•ÏÑ±ÏùÑ Ï¥âÏßÑÌïòÎäî Í≤ÉÏûÖÎãàÎã§.",
        step1_title: "1. ÏãùÎ≥Ñ (Identify)",
        step1_desc: "Î≤ÑÎ¶¨Î†§Îäî Î¨ºÍ±¥(Î≥ë, ÏÉÅÏûê, Ìóå Ïò∑, Í∞ÄÍµ¨ Îì±)Ïùò ÏÇ¨ÏßÑÏùÑ ÏóÖÎ°úÎìúÌïòÏÑ∏Ïöî.",
        step2_title: "2. Î∏åÎ†àÏù∏Ïä§ÌÜ†Î∞ç (Brainstorm)",
        step2_desc: "AIÍ∞Ä Ïû¨ÏßàÍ≥º Î™®ÏñëÏùÑ Î∂ÑÏÑùÌïòÏó¨ ÎèÖÌäπÌïòÍ≥† Ïã§Ïö©Ï†ÅÏù¥Î©∞ Ïã¨ÎØ∏Ï†ÅÏù∏ ÏóÖÏÇ¨Ïù¥ÌÅ¥ÎßÅ ÏïÑÏù¥ÎîîÏñ¥Î•º ÏÉùÏÑ±Ìï©ÎãàÎã§.",
        step3_title: "3. Ï†úÏûë (Create)",
        step3_desc: "ÎèÑÍµ¨ Î™©Î°ùÍ≥º ÎÇúÏù¥ÎèÑÍ∞Ä Ìè¨Ìï®Îêú Í∞ÑÎã®Ìïú Í∞ÄÏù¥ÎìúÎ•º Îî∞Îùº ÏÉàÎ°úÏö¥ Î¨ºÍ±¥ÏùÑ ÎßåÎì§Ïñ¥Î≥¥ÏÑ∏Ïöî.",
        gallery_title: "ÏòÅÍ∞ê Í∞§Îü¨Î¶¨",
        gallery_desc: "Í∞ÄÎä•ÏÑ±ÏùÑ ÌôïÏù∏Ìï¥Î≥¥ÏÑ∏Ïöî. Ïª§ÎÆ§ÎãàÌã∞ÏóêÏÑú ÏÉùÏÑ±Îêú Ïù∏Í∏∞ ÌîÑÎ°úÏ†ùÌä∏Îì§ÏûÖÎãàÎã§.",
        gal1_title: "ÏôÄÏù∏Î≥ë Îû®ÌîÑ",
        gal1_desc: "Îπà Ïú†Î¶¨Î≥ëÏóê ÌéòÏñ¥Î¶¨ ÎùºÏù¥Ìä∏ÎÇò Îû®ÌîÑ ÌÇ§Ìä∏Î•º ÎÑ£Ïñ¥ Ïö∞ÏïÑÌïú ÌÖåÏù¥Î∏î Îû®ÌîÑÎ°ú Î≥ÄÏã†ÏãúÌÇ§ÏÑ∏Ïöî.",
        gal2_title: "Ï≤≠Î∞îÏßÄ ÌÜ†Ìä∏Î∞±",
        gal2_desc: "Ìóå Ï≤≠Î∞îÏßÄÎ•º ÌäºÌäºÌïòÍ≥† Ïä§ÌÉÄÏùºÎ¶¨ÏãúÌïú Ïû•Î∞îÍµ¨ÎãàÏö© ÌÜ†Ìä∏Î∞±ÏúºÎ°ú Î¶¨ÌèºÌï¥Î≥¥ÏÑ∏Ïöî.",
        gal3_title: "ÌÜµÏ°∞Î¶º Ï∫î ÌôîÎ∂Ñ",
        gal3_desc: "ÌÜµÏ°∞Î¶º Ï∫îÏùÑ ÏîªÏñ¥ Î∞ùÏùÄ ÏÉâÏúºÎ°ú Ïπ†ÌïòÍ≥† Ï£ºÎ∞©Ïö© ÌóàÎ∏åÎ•º ÌÇ§Ïö∞Îäî ÌôîÎ∂ÑÏúºÎ°ú ÏÇ¨Ïö©ÌïòÏÑ∏Ïöî.",
        gal4_title: "ÏÇ¨Îã§Î¶¨ Ï±ÖÏû•",
        gal4_desc: "Ïò§ÎûòÎêú ÎÇòÎ¨¥ ÏÇ¨Îã§Î¶¨Î•º Î≤ΩÏóê ÏàòÌèâÏúºÎ°ú ÏÑ§ÏπòÌïòÏó¨ ÏÜåÎ∞ïÌïòÍ≥† Í≥µÍ∞Ñ Ï†àÏïΩÌòïÏù∏ Ï±ÖÏû•ÏùÑ ÎßåÎìúÏÑ∏Ïöî.",
        loading_text: "Ïû†Ïû¨Î†•ÏùÑ Î∂ÑÏÑùÌïòÎäî Ï§ë...",
        footer_text: "&copy; 2026 Upcycle AI. ÏßÄÏÜç Í∞ÄÎä•Ìïú ÏÉùÌôúÏùÑ ÏúÑÌïú ÏûëÏùÄ Ïã§Ï≤ú.",
        tools_label: "Ï§ÄÎπÑÎ¨º:",
        save_btn: "Ï†ÄÏû•",
        saved_btn: "Ï†ÄÏû•Îê®",
        share_btn: "Í≥µÏú†",
        share_msg: "Ïù¥ ÏóÖÏÇ¨Ïù¥ÌÅ¥ÎßÅ ÏïÑÏù¥ÎîîÏñ¥ ÌôïÏù∏Ìï¥Î≥¥ÏÑ∏Ïöî: ",
        share_success: "ÎßÅÌÅ¨Í∞Ä Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§!",
        // New How It Works & Tips
        how_step1_detail: "Îçî Ïù¥ÏÉÅ ÏÇ¨Ïö©ÌïòÏßÄ ÏïäÎäî Î¨ºÍ±¥‚ÄîÎπà Î≥ë, ÌÉùÎ∞∞ Î∞ïÏä§, ÎÇ°ÏùÄ Ìã∞ÏÖîÏ∏†, ÌòπÏùÄ Î∂ÄÏÑúÏßÑ Í∞ÄÍµ¨ Îì±ÏùÑ Ï∞æÏïÑÎ≥¥ÏÑ∏Ïöî.",
        how_step2_detail: "Ïö∞Î¶¨Ïùò AI Í∏∞Ïà†Ïù¥ Î¨ºÍ±¥Ïùò Ïû¨Ïßà, Î™®Ïñë, ÏÉÅÌÉúÎ•º Î∂ÑÏÑùÌïòÏó¨ ÏµúÏ†ÅÏùò Î¶¨Ìèº ÌîÑÎ°úÏ†ùÌä∏Î•º Ï†úÏïàÌï©ÎãàÎã§.",
        how_step3_detail: "ÌïÑÏöîÌïú ÎèÑÍµ¨ Î™©Î°ùÍ≥º ÏòàÏÉÅ ÎÇúÏù¥ÎèÑÍ∞Ä Ìè¨Ìï®Îêú Îã®Í≥ÑÎ≥Ñ Í∞ÄÏù¥ÎìúÎ•º Ï†úÍ≥µÌïòÏó¨ Ï¶âÏãú Ï†úÏûëÏùÑ ÏãúÏûëÌï† Ïàò ÏûàÏäµÎãàÎã§.",
        tip_title: "Îçî Ï¢ãÏùÄ Í≤∞Í≥ºÎ•º ÏúÑÌïú ÌåÅ",
        tip_1_title: "Ï¢ãÏùÄ Ï°∞Î™Ö",
        tip_1_desc: "AIÍ∞Ä ÏßàÍ∞êÍ≥º ÎîîÌÖåÏùºÏùÑ Î™ÖÌôïÌïòÍ≤å Î≥º Ïàò ÏûàÎèÑÎ°ù Î∞ùÏùÄ Í≥≥ÏóêÏÑú Ï¥¨ÏòÅÌïòÏÑ∏Ïöî.",
        tip_2_title: "ÍπîÎÅîÌïú Î∞∞Í≤Ω",
        tip_2_desc: "AIÍ∞Ä Î¨ºÏ≤¥Îßå Ï†ïÌôïÌûà Ïù∏ÏãùÌï† Ïàò ÏûàÎèÑÎ°ù Îã®ÏàúÌïú Î∞∞Í≤ΩÏóê Î¨ºÍ±¥ÏùÑ ÎÜìÏïÑÏ£ºÏÑ∏Ïöî.",
        tip_3_title: "Ìïú Î≤àÏóê ÌïòÎÇòÏî©",
        tip_3_desc: "Í∞ÄÏû• Ï†ïÌôïÌïú ÏïÑÏù¥ÎîîÏñ¥Î•º ÏñªÏúºÎ†§Î©¥ Ìïú Î≤àÏóê ÌïòÎÇòÏùò Î¨ºÍ±¥Îßå Ïä§Ï∫îÌïòÎäî Í≤ÉÏù¥ Ï¢ãÏäµÎãàÎã§.",
        faq_title: "ÏûêÏ£º Î¨ªÎäî ÏßàÎ¨∏ (FAQ)",
        faq_q1: "Ïù¥ ÏÑúÎπÑÏä§Îäî Î¨¥Î£åÏù∏Í∞ÄÏöî?",
        faq_a1: "ÎÑ§! Upcycle AIÎäî ÏóÖÏÇ¨Ïù¥ÌÅ¥ÎßÅ ÏïÑÏù¥ÎîîÏñ¥Î•º ÏÉùÏÑ±ÌïòÎäî Îç∞ ÏôÑÏ†ÑÌûà Î¨¥Î£åÏûÖÎãàÎã§.",
        faq_q2: "ÌöåÏõêÍ∞ÄÏûÖÏù¥ ÌïÑÏöîÌïúÍ∞ÄÏöî?",
        faq_a2: "ÏïÑÎãàÏöî, Í≥ÑÏ†ï ÏóÜÏù¥ Ï¶âÏãú ÏïÑÏù¥ÎîîÏñ¥Î•º ÏÉùÏÑ±Ìï† Ïàò ÏûàÏäµÎãàÎã§. Ï¶êÍ≤®Ï∞æÍ∏∞ Ï†ÄÏû•ÏùÄ Î∏åÎùºÏö∞Ï†Ä Ï†ÄÏû•ÏÜåÎ•º ÏÇ¨Ïö©Ìï©ÎãàÎã§.",
        faq_q3: "Ïñ¥Îñ§ Î¨ºÍ±¥Ïù¥ Í∞ÄÏû• Ïûò ÎêòÎÇòÏöî?",
        faq_a3: "Ïú†Î¶¨Î≥ë, ÌÜµÏ°∞Î¶º Ï∫î, Í≥®ÌåêÏßÄ Î∞ïÏä§, Ï≤≠Î∞îÏßÄ, ÌîåÎùºÏä§Ìã± Ïö©Í∏∞ Í∞ôÏùÄ ÏùºÎ∞òÏ†ÅÏù∏ Í∞ÄÏ†ï ÌèêÍ∏∞Î¨ºÏù¥ Í∞ÄÏû• Ï†ÅÌï©Ìï©ÎãàÎã§.",
        cta_title: "ÏãúÏûëÌï† Ï§ÄÎπÑÍ∞Ä ÎêòÏÖ®ÎÇòÏöî?",
        cta_btn: "ÏßÄÍ∏à Î¨ºÍ±¥ ÏóÖÎ°úÎìúÌïòÍ∏∞",
        // Inspiration Page
        insp_hero_title: "Ïª§ÎÆ§ÎãàÌã∞ ÏûëÌíà",
        insp_hero_desc: "Ï†Ñ ÏÑ∏Í≥Ñ Ïª§ÎÆ§ÎãàÌã∞ÏóêÏÑú Í≥µÏú†Îêú Ï∞ΩÏùòÏ†ÅÏù∏ ÏóÖÏÇ¨Ïù¥ÌÅ¥ÎßÅ ÌîÑÎ°úÏ†ùÌä∏Î•º ÎßåÎÇòÎ≥¥ÏÑ∏Ïöî.",
        filter_all: "Ï†ÑÏ≤¥",
        filter_lighting: "Ï°∞Î™Ö",
        filter_fashion: "Ìå®ÏÖò",
        filter_garden: "Ï†ïÏõê/ÏãùÎ¨º",
        filter_decor: "Ìôà Îç∞ÏΩî",
        featured_tag: "Ïù¥Îã¨Ïùò Ï∂îÏ≤ú",
        featured_title: "ÌéòÌä∏Î≥ë ÏàòÏßÅ Ï†ïÏõê",
        featured_desc: "Ïû¨ÌôúÏö© ÌéòÌä∏Î≥ëÏùÑ ÌôúÏö©Ìïú ÏßÄÏÜç Í∞ÄÎä•Ìïú ÎèÑÏãú Ï†ïÏõêÏûÖÎãàÎã§. Î≤†ÎûÄÎã§ÎÇò ÏûëÏùÄ Ï£ºÎ∞©Ïóê ÏôÑÎ≤ΩÌï©ÎãàÎã§.",
        cta_submit_title: "Î©ãÏßÑ ÏûëÌíàÏùÑ ÎßåÎìúÏÖ®ÎÇòÏöî?",
        cta_submit_desc: "ÎãπÏã†Ïùò ÏóÖÏÇ¨Ïù¥ÌÅ¥ÎßÅ ÌîÑÎ°úÏ†ùÌä∏Î•º Ïª§ÎÆ§ÎãàÌã∞Ïóê Í≥µÏú†ÌïòÍ≥† Îã§Î•∏ ÏÇ¨ÎûåÎì§ÏóêÍ≤å ÏòÅÍ∞êÏùÑ Ï£ºÏÑ∏Ïöî!",
        cta_submit_btn: "ÌîÑÎ°úÏ†ùÌä∏ Ï†úÏ∂úÌïòÍ∏∞",
        // Static Content (Index)
        why_upcycle_title: "Ïôú ÏóÖÏÇ¨Ïù¥ÌÅ¥ÎßÅÏù∏Í∞ÄÏöî?",
        why_upcycle_desc: "ÏóÖÏÇ¨Ïù¥ÌÅ¥ÎßÅÏùÄ Îã®ÏàúÌïú Ïú†ÌñâÏù¥ ÏïÑÎãàÎùº ÏßÄÏÜç Í∞ÄÎä•Ìïú ÎØ∏ÎûòÎ•º ÏúÑÌïú ÌïÑÏàòÏ†ÅÏù∏ Î≥ÄÌôîÏûÖÎãàÎã§. Î¨ºÍ±¥ÏùÑ Ïû¨ÏÇ¨Ïö©Ìï®ÏúºÎ°úÏç® Ïö∞Î¶¨Îäî Îß§Î¶Ω Ïì∞Î†àÍ∏∞Î•º Ï§ÑÏù¥Í≥† ÏûêÏõêÏùÑ Ï†àÏïΩÌïòÎ©∞ Ï∞ΩÏùòÎ†•ÏùÑ Î∞úÌúòÌï† Ïàò ÏûàÏäµÎãàÎã§. Î™®Îì† Î≥ë, ÏÉÅÏûê, Ï≤ú Ï°∞Í∞ÅÏùÄ ÏïÑÎ¶ÑÎãµÍ≥† Ïã§Ïö©Ï†ÅÏù∏ Î¨¥Ïñ∏Í∞ÄÍ∞Ä Îê† Ïû†Ïû¨Î†•ÏùÑ Í∞ÄÏßÄÍ≥† ÏûàÏäµÎãàÎã§.",
        feature_1_title: "ÏπúÌôòÍ≤ΩÏ†Å",
        feature_1_desc: "ÏÉà Î¨ºÍ±¥ÏùÑ ÏÇ¨Îäî ÎåÄÏã† ÎÇ°ÏùÄ Î¨ºÍ±¥Ïóê ÏÉà ÏÉùÎ™ÖÏùÑ Î∂àÏñ¥ÎÑ£Ïñ¥ ÌÉÑÏÜå Î∞úÏûêÍµ≠ÏùÑ Ï§ÑÏù¥ÏÑ∏Ïöî.",
        feature_2_title: "Í≤ΩÏ†úÏ†Å",
        feature_2_desc: "Ïù¥ÎØ∏ Í∞ÄÏßÄÍ≥† ÏûàÎäî Ïû¨Î£åÎ•º ÏÇ¨Ïö©ÌïòÏó¨ Ìôà Îç∞ÏΩîÏôÄ Ï†ïÎ¶¨ Ïö©Ìíà ÎπÑÏö©ÏùÑ Ï†àÏïΩÌïòÏÑ∏Ïöî.",
        feature_3_title: "Ï∞ΩÏùòÏ†Å ÌôúÎèô",
        feature_3_desc: "ÎÇòÎßåÏùò ÎßûÏ∂§Ìòï ÌîÑÎ°úÏ†ùÌä∏Î°ú ÎèÖÌäπÌïú Ïä§ÌÉÄÏùºÏùÑ ÌëúÌòÑÌïòÍ≥† DIY Í∏∞Ïà†ÏùÑ Ìñ•ÏÉÅÏãúÌÇ§ÏÑ∏Ïöî.",
        popular_ideas_title: "Ïù∏Í∏∞ÏûàÎäî ÏóÖÏÇ¨Ïù¥ÌÅ¥ÎßÅ ÏïÑÏù¥ÎîîÏñ¥",
        // Popular Cards
        pop_type_decor: "Îç∞ÏΩî",
        pop_type_storage: "ÏàòÎÇ©",
        pop_type_fashion: "Ìå®ÏÖò",
        pop_diff_easy: "Ïâ¨ÏõÄ",
        pop_diff_medium: "Î≥¥ÌÜµ",
        pop_card1_title: "Ïú†Î¶¨Î≥ë ÌÖåÎùºÎ¶¨ÏõÄ",
        pop_card1_desc: "Îã§ Ïì¥ ÌååÏä§ÌÉÄ ÏÜåÏä§ Î≥ëÏóê ÏûëÏùÄ ÏÉùÌÉúÍ≥ÑÎ•º ÎßåÎì§Ïñ¥Î≥¥ÏÑ∏Ïöî. Îã§Ïú°ÏãùÎ¨ºÍ≥º Ïù¥ÎÅºÏóê Ï†ÅÌï©Ìï©ÎãàÎã§.",
        pop_card1_tool1: "Íπ®ÎÅóÌïú Î≥ë",
        pop_card1_tool2: "Ìùô",
        pop_card1_tool3: "ÏûêÍ∞à",
        pop_card2_title: "ÏãúÎ¶¨Ïñº Î∞ïÏä§ Ï†ïÎ¶¨Ìï®",
        pop_card2_desc: "ÏãúÎ¶¨Ïñº Î∞ïÏä§Î•º ÎπÑÏä§Îì¨Ìûà ÏûòÎùº Ïä§ÌÉÄÏùºÎ¶¨ÏãúÌïú Ïû°ÏßÄ ÍΩÇÏù¥ÎÇò ÏÑúÎ•ò Ï†ïÎ¶¨Ìï®ÏùÑ ÎßåÎìúÏÑ∏Ïöî.",
        pop_card2_tool1: "Í∞ÄÏúÑ",
        pop_card2_tool2: "Ìè¨Ïû•ÏßÄ",
        pop_card2_tool3: "ÌíÄ",
        pop_card3_title: "Ìã∞ÏÖîÏ∏† Ïã§ Îü¨Í∑∏",
        pop_card3_desc: "ÎÇ°ÏùÄ Ìã∞ÏÖîÏ∏†Î•º Ïã§Î°ú ÎßåÎì§Ïñ¥ ÏßëÏïàÏùÑ ÌôîÏÇ¨ÌïòÍ≤å Ìï¥Ï§Ñ ÌäºÌäºÌïòÍ≥† Îã§Ï±ÑÎ°úÏö¥ Îü¨Í∑∏Î•º ÏßúÎ≥¥ÏÑ∏Ïöî.",
        pop_card3_tool1: "Ìóå Ìã∞ÏÖîÏ∏†",
        pop_card3_tool2: "Í∞ÄÏúÑ",
        pop_card3_tool3: "ÏΩîÎ∞îÎäò (ÏÑ†ÌÉù)"
    }
};

// Mock Data
const MOCK_DATA = {
    en: {
        "detected_item": "Empty Glass Wine Bottle",
        "ideas": [
            {
                "id": 1,
                "type": "Easy Start",
                "title": "Minimalist Single-Stem Vase",
                "description": "Transform that bottle into a chic vase by removing the label and wrapping the neck with twine for a rustic touch.",
                "difficulty": "Easy",
                "required_tools": ["Warm Water", "Scrubbing Sponge", "Jute Twine", "Scissors", "Clear Glue"]
            },
            {
                "id": 2,
                "type": "Aesthetic Decor",
                "title": "Fairy Light Lantern",
                "description": "Create a magical ambiance by stuffing the bottle with battery-operated copper wire fairy lights. perfect for nightstands.",
                "difficulty": "Medium",
                "required_tools": ["Fairy Lights (Battery Op)", "Glass Paint (Optional)", "Cork Stopper"]
            },
            {
                "id": 3,
                "type": "Functional Use",
                "title": "Self-Watering Planter",
                "description": "Cut the bottle in half to create a self-watering system for your herbs. The top holds the soil, inverted into the water-filled base.",
                "difficulty": "Hard",
                "required_tools": ["Glass Cutter", "Sandpaper", "Potting Soil", "Cotton String", "Herb Seedling"]
            }
        ]
    },
    ko: {
        "detected_item": "Îπà ÏôÄÏù∏ Ïú†Î¶¨Î≥ë",
        "ideas": [
            {
                "id": 1,
                "type": "Ïâ¨Ïö¥ ÏãúÏûë",
                "title": "ÎØ∏ÎãàÎ©Ä ÌïúÏÜ°Ïù¥ ÌôîÎ≥ë",
                "description": "ÎùºÎ≤®ÏùÑ Ï†úÍ±∞ÌïòÍ≥† Î≥ëÎ™©ÏùÑ ÎßàÎÅàÏúºÎ°ú Í∞êÏã∏ ÏÜåÎ∞ïÌïú ÎäêÎÇåÏùÑ Ï£ºÎäî ÏãúÌÅ¨Ìïú ÌôîÎ≥ëÏúºÎ°ú Î≥ÄÏã†ÏãúÌÇ§ÏÑ∏Ïöî.",
                "difficulty": "Ïâ¨ÏõÄ",
                "required_tools": ["Îî∞ÎúªÌïú Î¨º", "ÏàòÏÑ∏ÎØ∏", "ÎßàÎÅà", "Í∞ÄÏúÑ", "Ìà¨Î™Ö ÌíÄ"]
            },
            {
                "id": 2,
                "type": "Í∞êÏÑ± Îç∞ÏΩî",
                "title": "Î¨¥ÎìúÎì± ÎûúÌÑ¥",
                "description": "Î∞∞ÌÑ∞Î¶¨Î°ú ÏûëÎèôÌïòÎäî ÏΩîÌçº ÏôÄÏù¥Ïñ¥ Ï°∞Î™ÖÏùÑ Î≥ë ÏïàÏóê ÎÑ£Ïñ¥ ÎßàÎ≤ï Í∞ôÏùÄ Î∂ÑÏúÑÍ∏∞Î•º Ïó∞Ï∂úÌïòÏÑ∏Ïöî. Ïπ®ÎåÄ ÌòëÌÉÅÏóê ÏôÑÎ≤ΩÌï©ÎãàÎã§.",
                "difficulty": "Î≥¥ÌÜµ",
                "required_tools": ["ÌéòÏñ¥Î¶¨ ÎùºÏù¥Ìä∏ (Í±¥Ï†ÑÏßÄÏãù)", "Ïú†Î¶¨ Î¨ºÍ∞ê (ÏÑ†ÌÉù)", "ÏΩîÎ•¥ÌÅ¨ ÎßàÍ∞ú"]
            },
            {
                "id": 3,
                "type": "Ïã§Ïö©Ï†Å ÌôúÏö©",
                "title": "ÏûêÎèô Í∏âÏàò ÌôîÎ∂Ñ",
                "description": "Î≥ëÏùÑ Î∞òÏúºÎ°ú ÏûòÎùº ÌóàÎ∏åÎ•º ÏúÑÌïú ÏûêÎèô Í∏âÏàò ÏãúÏä§ÌÖúÏùÑ ÎßåÎìúÏÑ∏Ïöî. ÏúóÎ∂ÄÎ∂ÑÏóêÎäî ÌùôÏùÑ Îã¥Í≥†, Î¨ºÏù¥ Îã¥Í∏¥ ÏïÑÎû´Î∂ÄÎ∂ÑÏóê Í±∞Íæ∏Î°ú ÍΩÇÏäµÎãàÎã§.",
                "difficulty": "Ïñ¥Î†§ÏõÄ",
                "required_tools": ["Ïú†Î¶¨ Ï†àÎã®Í∏∞", "ÏÇ¨Ìè¨", "Î∂ÑÍ∞àÏù¥ Ìùô", "Î©¥ ÎÅà", "ÌóàÎ∏å Î™®Ï¢Ö"]
            }
        ]
    }
};

let currentLang = 'en'; // Default

function initApp() {
    // --- DOM Elements ---
    const dropZone = document.getElementById('drop-zone');
    const fileInput = document.getElementById('file-input');
    const uploadBtn = document.getElementById('upload-btn');
    const imagePreview = document.getElementById('image-preview');
    const previewContainer = document.getElementById('preview-container');
    const removeImageBtn = document.getElementById('remove-image');
    const analyzeBtn = document.getElementById('analyze-btn');
    const loadingOverlay = document.getElementById('loading-overlay');
    const resultsSection = document.getElementById('results-section');
    const ideasContainer = document.getElementById('ideas-container');
    const detectedItemName = document.getElementById('detected-item-name');
    
    // Saved Ideas Elements
    const savedSection = document.getElementById('saved-section');
    const savedContainer = document.getElementById('saved-container');
    const emptySavedState = document.getElementById('empty-saved-state');
    const navSaved = document.getElementById('nav-saved');
    const navHome = document.getElementById('nav-home');
    const btnStartSaving = document.getElementById('btn-start-saving');
    
    // Language Elements
    const btnLang = document.getElementById('btn-lang');

    // Hamburger Menu Logic
    const hamburgerBtn = document.getElementById('hamburger-btn');
    const navMenu = document.getElementById('nav-menu');

    if (hamburgerBtn && navMenu) {
        hamburgerBtn.addEventListener('click', () => {
            hamburgerBtn.classList.toggle('active');
            navMenu.classList.toggle('active');
        });

        // Close menu when a link is clicked
        navMenu.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                hamburgerBtn.classList.remove('active');
                navMenu.classList.remove('active');
            });
        });
    }
    
    // --- FAQ Toggle Logic (New) ---
    const faqItems = document.querySelectorAll('.faq-item');
    faqItems.forEach(item => {
        const question = item.querySelector('.faq-question');
        if (question) {
            question.addEventListener('click', () => {
                // Close other items (optional - accordion style)
                faqItems.forEach(otherItem => {
                    if (otherItem !== item) otherItem.classList.remove('active');
                });
                item.classList.toggle('active');
            });
        }
    });

    // --- Language Logic ---
    function updateSEOTags(lang) {
        let canonical = document.querySelector('link[rel="canonical"]');
        if (!canonical) {
            canonical = document.createElement('link');
            canonical.rel = 'canonical';
            document.head.appendChild(canonical);
        }
        
        const baseUrl = window.location.origin + window.location.pathname;
        canonical.href = lang === 'en' ? baseUrl : `${baseUrl}?lang=${lang}`;

        // Alternate tags for SEO
        let altEn = document.querySelector('link[hreflang="en"]');
        if (!altEn) {
            altEn = document.createElement('link');
            altEn.rel = 'alternate';
            altEn.hreflang = 'en';
            document.head.appendChild(altEn);
        }
        altEn.href = baseUrl;

        let altKo = document.querySelector('link[hreflang="ko"]');
        if (!altKo) {
            altKo = document.createElement('link');
            altKo.rel = 'alternate';
            altKo.hreflang = 'ko';
            document.head.appendChild(altKo);
        }
        altKo.href = `${baseUrl}?lang=ko`;

        // x-default
        let altDefault = document.querySelector('link[hreflang="x-default"]');
        if (!altDefault) {
            altDefault = document.createElement('link');
            altDefault.rel = 'alternate';
            altDefault.hreflang = 'x-default';
            document.head.appendChild(altDefault);
        }
        altDefault.href = baseUrl;
    }

    function setLanguage(lang, updateURL = true) {
        if (!TRANSLATIONS[lang]) lang = 'en'; // Safety fallback
        currentLang = lang;
        localStorage.setItem('preferredLang', lang);
        
        // Update URL without reload
        if (updateURL) {
            const newUrl = lang === 'en' 
                ? window.location.pathname 
                : `${window.location.pathname}?lang=${lang}`;
            window.history.pushState({ lang }, '', newUrl);
        }

        // Update SEO Tags
        updateSEOTags(lang);
        
        // Update Document Attributes for CSS Switching
        document.documentElement.setAttribute('data-lang', lang);
        document.documentElement.lang = lang;
        
        // Update Button Text
        if (btnLang) btnLang.textContent = lang === 'en' ? 'üá∞üá∑ KO' : 'üá∫üá∏ EN';

        // Update Text Content
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (TRANSLATIONS[lang] && TRANSLATIONS[lang][key]) {
                if (key === 'footer_text') {
                     el.innerHTML = TRANSLATIONS[lang][key];
                } else {
                    el.textContent = TRANSLATIONS[lang][key];
                }
            }
        });

        // Re-render dynamic content if visible
        if (resultsSection && !resultsSection.classList.contains('hidden')) {
             renderResults(MOCK_DATA[lang]);
        }
        
        if (savedSection && !savedSection.classList.contains('hidden')) {
            renderSavedIdeas();
        }
    }

    // Initialize Language
    const urlParams = new URLSearchParams(window.location.search);
    const langParam = urlParams.get('lang');
    const savedLang = localStorage.getItem('preferredLang');

    if (langParam && TRANSLATIONS[langParam]) {
        setLanguage(langParam, false);
    } else if (savedLang) {
        setLanguage(savedLang, false);
    } else {
        const browserLang = navigator.language.startsWith('ko') ? 'ko' : 'en';
        setLanguage(browserLang, false);
    }

    // Handle back/forward buttons
    window.addEventListener('popstate', (event) => {
        if (event.state && event.state.lang) {
            setLanguage(event.state.lang, false);
        } else {
            // Default to param or fallback
            const currentParams = new URLSearchParams(window.location.search);
            const currentLangParam = currentParams.get('lang') || 'en';
            setLanguage(currentLangParam, false);
        }
    });
    // Toggle Language (Delegated Event for Robustness)
    document.addEventListener('click', (e) => {
        // Handle button or its children (if any)
        if (e.target && (e.target.id === 'btn-lang' || e.target.closest('#btn-lang'))) {
            const newLang = currentLang === 'en' ? 'ko' : 'en';
            setLanguage(newLang);
        }
    });


    // --- Section Visibility Logic ---
    const sections = {
        home: [
            document.getElementById('hero-section'), 
            document.getElementById('upload-section'),
            document.getElementById('static-content'),
            document.getElementById('popular-ideas-section')
        ],
        saved: [savedSection]
    };

    function showSection(sectionName) {
        // If not on index.html, we need to redirect
        if (!document.getElementById('upload-section')) {
             window.location.href = sectionName === 'saved' ? 'index.html#saved' : 'index.html';
             return;
        }

        // Hide all major sections
        Object.values(sections).flat().forEach(el => {
            if(el) el.classList.add('hidden');
        });
        if(resultsSection) resultsSection.classList.add('hidden');
        
        // Show target section
        if (sections[sectionName]) {
            sections[sectionName].forEach(el => {
                if(el) el.classList.remove('hidden');
            });
        }

        if (sectionName === 'saved') {
            renderSavedIdeas();
            window.location.hash = 'saved';
        } else {
             window.location.hash = '';
        }
    }

    // Navigation Events
    if (navSaved) navSaved.addEventListener('click', (e) => {
        if (document.getElementById('upload-section')) {
            e.preventDefault();
            showSection('saved');
        }
    });

    if (navHome) navHome.addEventListener('click', (e) => {
        if (document.getElementById('upload-section')) {
            e.preventDefault();
            showSection('home');
            if (detectedItemName && detectedItemName.textContent !== '...') {
                 // If we have results, we might want to keep showing them? 
                 // Or reset? Let's reset to home state unless we want to keep state.
                 // Actually, if we click Home, we expect the initial state OR the current state.
                 // For simplicity, let's just go to Home state. 
                 // If the user has results, they are in the results section which is separate.
                 // If we want to return to results, we'd need a specific check.
                 // But typically Home means "Start over" or "Top".
                 
                 // If results are visible, let's hide them and show home.
                 resultsSection.classList.add('hidden');
            }
        }
    });

    if (btnStartSaving) btnStartSaving.addEventListener('click', () => {
        showSection('home');
    });

    // Check for hash on load
    if (window.location.hash === '#saved' && document.getElementById('upload-section')) {
        showSection('saved');
    }

    // --- Drag and Drop Events ---
    if (dropZone) {
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropZone.addEventListener(eventName, preventDefaults, false);
        });

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }

        ['dragenter', 'dragover'].forEach(eventName => {
            dropZone.addEventListener(eventName, highlight, false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
            dropZone.addEventListener(eventName, unhighlight, false);
        });

        function highlight() {
            dropZone.classList.add('drag-over');
        }

        function unhighlight() {
            dropZone.classList.remove('drag-over');
        }

        dropZone.addEventListener('drop', handleDrop, false);

        // Click to Upload
        dropZone.addEventListener('click', () => {
            if(previewContainer.classList.contains('hidden')) {
                fileInput.click();
            }
        });
    }

    function handleDrop(e) {
        const dt = e.dataTransfer;
        const files = dt.files;
        handleFiles(files);
    }

    if (uploadBtn) uploadBtn.addEventListener('click', (e) => {
        e.stopPropagation(); 
        fileInput.click();
    });
    
    if (fileInput) fileInput.addEventListener('change', function() {
        handleFiles(this.files);
    });

    function handleFiles(files) {
        if (files.length > 0) {
            const file = files[0];
            if (file.type.startsWith('image/')) {
                previewFile(file);
            } else {
                alert('Please upload an image file.');
            }
        }
    }

    function previewFile(file) {
        const reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onloadend = function() {
            imagePreview.src = reader.result;
            previewContainer.classList.remove('hidden');
            analyzeBtn.classList.remove('hidden');
            analyzeBtn.disabled = false;
        }
    }

    // Remove Image
    removeImageBtn.addEventListener('click', (e) => {
        e.stopPropagation(); 
        imagePreview.src = '';
        previewContainer.classList.add('hidden');
        analyzeBtn.classList.add('hidden');
        analyzeBtn.disabled = true;
        fileInput.value = ''; 
        resultsSection.classList.add('hidden');
        
        // Show static content again
        const staticContent = document.getElementById('static-content');
        const popularIdeas = document.getElementById('popular-ideas-section');
        if(staticContent) staticContent.classList.remove('hidden');
        if(popularIdeas) popularIdeas.classList.remove('hidden');
    });

    // Generate Ideas (Mock AI Call)
    analyzeBtn.addEventListener('click', async () => {
        showLoading(true);
        
        // Simulate network delay
        setTimeout(() => {
            renderResults(MOCK_DATA[currentLang]);
            showLoading(false);
            resultsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }, 2000);
    });

    function showLoading(show) {
        if (show) {
            loadingOverlay.classList.remove('hidden');
        } else {
            loadingOverlay.classList.add('hidden');
        }
    }

    // --- Saved Ideas Logic ---
    function getSavedIdeas() {
        const saved = localStorage.getItem('savedIdeas');
        return saved ? JSON.parse(saved) : [];
    }

    function toggleSave(idea) {
        const savedIdeas = getSavedIdeas();
        const index = savedIdeas.findIndex(item => item.id === idea.id && item.title === idea.title);
        
        if (index > -1) {
            savedIdeas.splice(index, 1);
        } else {
            savedIdeas.push(idea);
        }
        
        localStorage.setItem('savedIdeas', JSON.stringify(savedIdeas));
        return index === -1; 
    }

    function isSaved(idea) {
        const savedIdeas = getSavedIdeas();
        return savedIdeas.some(item => item.id === idea.id && item.title === idea.title);
    }

    // --- Sharing Logic ---
    async function handleShare(idea) {
        const shareData = {
            title: `Upcycle AI: ${idea.title}`,
            text: `${TRANSLATIONS[currentLang].share_msg} ${idea.title} - ${idea.description}`,
            url: window.location.href
        };

        if (navigator.share) {
            try {
                await navigator.share(shareData);
            } catch (err) {
                console.log('Error sharing:', err);
            }
        } else {
            // Fallback: Copy to clipboard
            try {
                await navigator.clipboard.writeText(`${shareData.text} ${shareData.url}`);
                alert(TRANSLATIONS[currentLang].share_success);
            } catch (err) {
                console.error('Failed to copy: ', err);
            }
        }
    }

    function createCardHTML(idea, saved) {
        let cssClass = 'medium';
        const diffLower = idea.difficulty.toLowerCase();
        if (diffLower.includes('easy') || diffLower.includes('Ïâ¨ÏõÄ')) cssClass = 'easy';
        if (diffLower.includes('hard') || diffLower.includes('Ïñ¥Î†§ÏõÄ')) cssClass = 'hard';

        const heartIcon = saved ? '‚ù§Ô∏è' : 'ü§ç';
        const btnClass = saved ? 'btn-save saved' : 'btn-save';
        
        const saveText = saved ? TRANSLATIONS[currentLang].saved_btn : TRANSLATIONS[currentLang].save_btn;
        const shareText = TRANSLATIONS[currentLang].share_btn;
        const toolsLabel = TRANSLATIONS[currentLang].tools_label;

        return `
            <div class="card-header">
                <span class="card-type">${idea.type}</span>
                <h3 class="card-title">${idea.title}</h3>
                <span class="badge ${cssClass}">${idea.difficulty}</span>
            </div>
            <div class="card-body">
                <p class="card-description">${idea.description}</p>
                <div class="tools-section">
                    <h4>${toolsLabel}</h4>
                    <div class="tools-list">
                        ${idea.required_tools.map(tool => `<span class="tool-tag">${tool}</span>`).join('')}
                    </div>
                </div>
            </div>
            <div class="card-footer">
                <button class="btn-share" data-id="${idea.id}" aria-label="Share">
                    üîó <span>${shareText}</span>
                </button>
                <button class="${btnClass}" data-id="${idea.id}" aria-label="Save to favorites">
                    ${heartIcon} <span>${saveText}</span>
                </button>
            </div>
        `;
    }

    function renderResults(data) {
        if (!detectedItemName || !ideasContainer) return;
        detectedItemName.textContent = data.detected_item;
        ideasContainer.innerHTML = ''; 

        data.ideas.forEach(idea => {
            const card = document.createElement('article');
            card.className = 'idea-card';
            
            const saved = isSaved(idea);
            card.innerHTML = createCardHTML(idea, saved);
            
            const saveBtn = card.querySelector('.btn-save');
            saveBtn.addEventListener('click', () => {
                const isNowSaved = toggleSave(idea);
                const newSaveText = isNowSaved ? TRANSLATIONS[currentLang].saved_btn : TRANSLATIONS[currentLang].save_btn;
                saveBtn.innerHTML = `${isNowSaved ? '‚ù§Ô∏è' : 'ü§ç'} <span>${newSaveText}</span>`;
                saveBtn.className = isNowSaved ? 'btn-save saved' : 'btn-save';
            });

            const shareBtn = card.querySelector('.btn-share');
            shareBtn.addEventListener('click', () => {
                handleShare(idea);
            });
            
            ideasContainer.appendChild(card);
        });

        resultsSection.classList.remove('hidden');

        // Hide Static Content
        const staticContent = document.getElementById('static-content');
        const popularIdeas = document.getElementById('popular-ideas-section');
        if(staticContent) staticContent.classList.add('hidden');
        if(popularIdeas) popularIdeas.classList.add('hidden');
    }

    function renderSavedIdeas() {
        if (!savedContainer) return;
        const savedIdeas = getSavedIdeas();
        savedContainer.innerHTML = '';

        if (savedIdeas.length === 0) {
            emptySavedState.classList.remove('hidden');
            savedContainer.classList.add('hidden');
            return;
        }

        emptySavedState.classList.add('hidden');
        savedContainer.classList.remove('hidden');

        savedIdeas.forEach(idea => {
            const card = document.createElement('article');
            card.className = 'idea-card';
            card.innerHTML = createCardHTML(idea, true);
            
            const saveBtn = card.querySelector('.btn-save');
            saveBtn.addEventListener('click', () => {
                toggleSave(idea);
                renderSavedIdeas();
            });

            const shareBtn = card.querySelector('.btn-share');
            shareBtn.addEventListener('click', () => {
                handleShare(idea);
            });

            savedContainer.appendChild(card);
        });
    }
}

// Robust Initialization
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initApp);
} else {
    initApp();
}
